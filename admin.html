<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>幼儿安全健康管理</title>
    <link rel="Shortcut Icon" href="http://banxiaobao.com:8015/gbb/img/logotitle.png">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link rel="stylesheet" href="css/left.css" type="text/css">
    <link rel="stylesheet" href="css/nav.css" type="text/css">
    <link rel="stylesheet" href="css/gatawaylist.css" type="text/css">
    <link type="text/css" rel="stylesheet" href="css/layer.css" id="skinlayercss">
    <link rel="stylesheet" href="css/dialog.css" type="text/css">
    <link rel="stylesheet" href="css/twitter.css" type="text/css">


    <!--js区-->
    <script src="./js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="js/jquery.shove-1.0.js"></script>
    <script type="text/javascript" src="js/layer.min.js"></script>
    <script type="text/javascript" src="js/msg.js"></script>
    <script charset="utf-8" src="js/jquery.form.js"></script>
    <script src="./js/md5.js"></script>
    <script src="./js/lib/avalon.js"></script>
    <script src="./js/lib/common.js"></script>
    <script type="text/javascript" src="js/jquery.artDialog.source.js"></script>
    <script type="text/javascript" src="js/iframeTools.js"></script>


    <style>
        .ms-controller, .ms-important, [ms-controller], [ms-important] {
            visibility: hidden;
        }
        .show{
            display: table!important;
        }
        .block{
            display: block!important;
        }
    </style>


    <script>
        avalon.ready(function () {
            var vm = avalon.define({
                $id: "adminVm",
                user: {},
                tegr_id: 0,   //集团ID
                school_id:0,//学校ID
                list:[],
                weight:1,
                adminList: [],
                tegerList: [],
                teacherList: [],
                schoolList: [],
                classList: [],
                parentList: [],
                studentList: [],
                lastReq: 0,
                tegerReq: 0,
                curPage: " ",
                teacherReq:0,
                schoolReq:0,
                classReq:0,
                parentReq:0,
                studentReq:0,
                pop:"",
                getAdmin: function () {
                    vm.adminList=[]
                    $.ajax({
                        url: "http://www.kh122.com:8081/ChildrenBackstage/backstageServlet/userApi/getAdminList",
                        type: "post",
                        data: {
                            user_id: vm.user.user_id,
                        },
                        success: function (data) {
                            var json = eval("(" + data + ")");// 解析json
                            console.log(json);
                            if (json.code == 200) {
                                vm.adminList = json.returnObject;
                            }
                        }
                    })
                },
                getTeger: function () {
                    vm.tegerList = [];
                    $.ajax({
                        url: "http://www.kh122.com:8081/ChildrenBackstage/backstageServlet/tegrApi/getTegrList",
                        type: 'post',
                        data: {
                            user_id: vm.user.user_id,
                        },
                        success: function (data) {
                            var json = eval("(" + data + ")");// 解析json
                            if (json.code == 200) {
                                vm.tegerList = json.result;
                            }
                        }

                    })
                },
                getTeacher: function () {
                    vm.teacherList = [];
                    $.ajax({
                        url: "http://www.kh122.com:8081/ChildrenBackstage/backstageServlet/teacherApi/getTeacherList",
                        type: 'post',
                        data: {
                            user_id: vm.user.user_id,
                            tegr_id: vm.user.tegr_id,
                            page: 1,
                            page_size: 10,
                            last_req_time: vm.teacherReq
                        },
                        success: function (data) {
                            var json = eval("(" + data + ")");// 解析json
                            if (json.code == 200) {
                                vm.teacherReq= json.result.last_req_time;
                                vm.teacherList = json.result.list;
                            }
                        }

                    })
                },
                getSchool: function () {
                    vm.rulerList = [];
                    $.ajax({
                        url: "http://www.kh122.com:8081/ChildrenBackstage/backstageServlet/schoolApi/getSchoolList",
                        type: 'post',
                        data: {
//                            user_id: vm.user.user_id,
                            tegr_id: vm.tegr_id,
                            page: 1,
                            page_size: 10,
                            last_req_time: vm.ringReq
                        },
                        success: function (data) {
                            var json = eval("(" + data + ")");// 解析json
                            if (json.code == 200) {
                                vm.lastReq = json.result.last_req_time;
                                vm.schoolList = json.result.list;
                            }
                        }

                    })
                },
                getClass: function () {
                    vm.classList = [];
                    $.ajax({
                        url: "http://www.kh122.com:8081/ChildrenBackstage/backstageServlet/classApi/getClassList",
                        type: 'post',
                        data: {
                            user_id: vm.user.user_id,
                            school_id: vm.school_id,
                            page: 1,
                            page_size: 10,
                            last_req_time: vm.ringReq
                        },
                        success: function (data) {
                            var json = eval("(" + data + ")");// 解析json
                            console.log(json);
                            if (json.code == 200) {
                                vm.lastReq = json.result.last_req_time;
                                vm.classList = json.result.list;
                            }
                        }

                    })
                },
                getParent: function () {
                    vm.steelyardList = [];
                    $.ajax({
                        url: "http://www.kh122.com:8081/ChildrenBackstage/backstageServlet/parentApi/getParentList",
                        type: 'post',
                        data: {
                            teger_id: vm.user.teger_id,
                            school_id: vm.school_id,
                            page: 1,
                            page_size: 10,
                            last_req_time: vm.ringReq
                        },
                        success: function (data) {
                            var json = eval("(" + data + ")");// 解析json
                            console.log(json);
                            if (json.code == 200) {
                                vm.lastReq = json.result.last_req_time;
                                vm.parentList = json.result.list;
                            }
                        }

                    })
                },
                getStudent: function () {
                    vm.studentList = [];
                    $.ajax({
                        url: "http://www.kh122.com:8081/ChildrenBackstage/backstageServlet/childApi/getChildList",
                        type: 'post',
                        data: {
                            class_id: vm.user.user_id,
                            school_id: vm.school_id,
                            page: 1,
                            page_size: 10,
                            last_req_time: vm.ringReq
                        },
                        success: function (data) {
                            var json = eval("(" + data + ")");// 解析json
                            console.log(json);
                            if (json.code == 200) {
                                vm.lastReq = json.result.last_req_time;
                                vm.studentList = json.result.list;
                            }
                        }
                    })
                },
                router: function (str) {
                    vm.curPage=str;
                },
                init: function () {
                    var user = getLocalValue('user');
                    if (user == null) {
                        location.href="/oa/login.html";
                    }
                    vm.user = user;
                    var ty=user.role_type;
                    if(ty=="8"){
                        vm.weight=2
                        vm.router('teacher')
                    }
                    else if(ty=="16" || ty=="32"){
                        vm.weight=3
                        vm.router('admin')
                    }else{
                        vm.weight=1
                        vm.router('school')
                    }
                }
            })


            vm.$watch('tegr_id', function (value, oldValue) {
                vm.getTeger();
            })
            vm.$watch('curPage',function(value){
                if(value=="admin"){vm.getAdmin();}
                if(value=="teger"){vm.getTeger();}
                if(value=="teacher"){vm.getTeger();vm.getTeacher();}
                if(value=="school"){vm.getSchool();}
                if(value=='class'){vm.getClass();}
                if(value=='parent'){vm.getParent();}
                if(value=='student'){vm.getStudent();}
            })

            avalon.scan()
            vm.init();



        })
    </script>
</head>


<body ms-controller="adminVm">

<div class="baby_content">
    <!--头部-->
    <div ms-include-src=" './component/banner.html'"></div>


    <div class="baby_conter_cd">
        <!--子导航栏-->
        <div class="baby_conter_left">
            <div class="baby_conter_li" id="teachLeft_Id">
                <a ms-class="baby_conter_school:curPage == 'admin' "    ms-click="router('admin')"  ms-if="weight==3 "><img src="img/buttom.png">系统用户</a>
                <a ms-class="baby_conter_school:curPage == 'teger' "    ms-click="router('teger')" ms-if="weight==3 " ><img src="img/buttom.png">集团列表</a>
                <a ms-class="baby_conter_school:curPage == 'school' "   ms-click="router('school')" ><img src="img/buttom.png">学校列表</a>
                <a ms-class="baby_conter_school:curPage == 'parent' "   ms-click="router('parent')"><img src="img/buttom.png">家长列表</a>


            </div>
            <div class="Copyright">
                <div class="p">Powered by glorymi<br>深圳市伴小宝科技有限公司</div>
            </div>
        </div>


        <div class="baby_conter_right">
            <form action="http://banxiaobao.com:8015/gbb/admin/teacherList.do" method="post" id="formId">
                <input type="hidden" id="adminId" name="adminId">
                <input value="1" type="hidden" id="pageNum" name="pageNum">

                <!--集团选择框-->
                <div class="select" ms-if="curPage =='school'">
                    <span>集团：&nbsp;</span>
                    <select name="" id="" ms-duplex="teger_id">
                        <option ms-attr-value="{{el.teger_id}}" ms-repeat="tegerList">{{el.tegr_name}}</option>
                    </select>
                </div>
                <!--选择框-->
                <div class="select" ms-if="curPage=='parent'">
                    <span>集团：&nbsp;</span>
                    <select name=""  ms-duplex="teger_id">
                        <option ms-attr-value="{{el.teger_id}}" ms-repeat="tegerList">{{el.tegr_name}}</option>
                    </select>
                    <span>学校：&nbsp;</span>
                    <select name=""  ms-duplex="school_id">
                        <option ms-attr-value="{{el.school_id}}" ms-repeat="schoolList">{{el.school_name}}</option>
                    </select>
                </div>


                <!--数据主体-->

                <!--管理员数据-->
                <div class="baby_content_tab"  ms-if=" curPage == 'admin'   " >
                    <ul class="baby_content_tab_menu">
                        <li>选择</li>
                        <li>姓名</li>
                        <li>角色</li>
                        <li>账号</li>
                        <li>操作</li>
                    </ul>

                    <!--数据-->
                    <ul class="baby_content_tab_ul1 " ms-repeat="adminList" ms-class = "baby_content_tab_bg:$index%2!=0">
                        <li class="baby_tab_checkbox_li"><input type="checkbox" id="checkid_0" name="checkbox"
                                                                value="190 " onclick="checkBox(0,this);"></li>
                        <li>{{el.name}}</li>
                        <li>{{el.remark}}</li>
                        <li>{{el.username}}</li>
                        <li><a class="edit" href="javascript: void(0)" eid="190">编辑</a></li>
                    </ul>
                </div>

                <!--集团数据-->
                <div class="baby_content_tab" ms-if="curPage == 'teger'  && weight==3 ">
                    <ul class="baby_content_tab_menu">
                        <li>选择</li>
                        <li>集团名称</li>
                        <li>人数</li>
                        <li>管理员</li>
                        <li>操作</li>
                    </ul>
                    <!--数据-->
                    <ul class="baby_content_tab_ul1 " ms-repeat="tegerList" ms-class = "baby_content_tab_bg:$index%2!=0">
                        <li class="baby_tab_checkbox_li">
                            <input type="checkbox" id="checkid_1" name="checkbox" value="190 "
                                   onclick="checkBox(1,this);">
                        </li>
                        <li>{{el.tegr_name}}</li>
                        <li>{{el.totalCount}}</li>
                        <li>{{el.name}}</li>
                        <li>
                            <a class="edit" href="javascript: void(0)" eid="190">编辑</a>
                            <a class="edit" ms-click="router('teacher')" eid="190">查看</a>
                        </li>
                    </ul>
                </div>

                <!--教师管理数据-->
                <div class="user-main2" style="display: none" ms-class="block:curPage == 'teacher'" ms-if="curPage == 'teacher' ">
                    <div class="user-title2">
                        <a ms-click="router('teger')" class="back">
                            <img src="img/back.png" title="">
                        </a>
                        <h3>{{？集团}}</h3>
                    </div>
                </div>
                <div class="baby_content_tab" ms-if="curPage =='teacher'   && weight>=2 ">
                    <ul class="baby_content_tab_menu">
                        <li>选择</li>
                        <li>集团名称</li>
                        <li>姓名</li>
                        <li>角色</li>
                        <li>账号</li>
                        <li>操作</li>
                    </ul>
                    <!--&lt;!&ndash;数据&ndash;&gt;-->
                    <ul class="baby_content_tab_ul1 " ms-repeat="teacherList" ms-class = "baby_content_tab_bg:$index%2!=0">
                        <li class="baby_tab_checkbox_li"><input type="checkbox" id="checkid_2" name="checkbox"
                                                                value="" onclick="checkBox(2,this);"></li>
                        <li>{{el.tegr_id}}</li>
                        <li>{{el.name}}</li>
                        <li>{{el.role_type}}</li>
                        <li>{{el.username}}</li>
                        <li><a class="edit" href="javascript: void(0)" eid="190">编辑</a></li>
                    </ul>
                </div>

                <!--学校管理数据-->
                <div class="baby_content_tab" ms-if="curPage =='school' " >
                    <ul class="baby_content_tab_menu">
                        <li>选择</li>
                        <li>集团名称</li>
                        <li>学校名称</li>
                        <li>集团管理员</li>
                        <li>操作</li>
                    </ul>
                    <!--&lt;!&ndash;数据&ndash;&gt;-->
                    <ul class="baby_content_tab_ul1 " ms-repeat="schoolList" ms-class = "baby_content_tab_bg:$index%2!=0">
                        <li class="baby_tab_checkbox_li"><input type="checkbox"  name="checkbox"
                                                                value="190 " onclick="checkBox(3,this);"></li>
                        <li>{{el.tegr_name}}</li>
                        <li>{{el.school_name}}</li>
                        <li>{{el.name}}</li>
                        <li>
                            <a class="edit" href="javascript: void(0)" >编辑</a>
                            <a class="edit" ms-click="router('class')" >查看</a>
                        </li>
                    </ul>
                </div>

                <!--班级管理数据-->
                <div class="user-main2" style="display: none" ms-class="block:curPage == 'class'" ms-if="curPage == 'class' ">
                    <div class="user-title2">
                        <a ms-click="router('school')" class="back">
                            <img src="img/back.png" title="">
                        </a>
                        <h3>{{？学校}}</h3>
                    </div>
                </div>
                <div class="baby_content_tab" ms-if="curPage =='class'" >
                    <ul class="baby_content_tab_menu">
                        <li>选择</li>
                        <li>学校名称</li>
                        <li>班级</li>
                        <li>操作</li>
                    </ul>
                    <!--&lt;!&ndash;数据&ndash;&gt;-->
                    <ul class="baby_content_tab_ul1 " ms-repeat="classList" ms-class = "baby_content_tab_bg:$index%2!=0">
                        <li class="baby_tab_checkbox_li"><input type="checkbox"  name="checkbox"
                                                                value="190 " onclick="checkBox(3,this);"></li>
                        <li>{{el.school_name}}</li>
                        <li>{{el.class_name}}</li>
                        <li>
                            <a class="edit" href="javascript: void(0)" >编辑</a>
                            <a class="edit" ms-click="router('student')" >查看</a>
                        </li>
                    </ul>
                </div>

                <!--家长管理数据-->
                <div class="baby_content_tab" ms-if="curPage =='parent'" >
                    <ul class="baby_content_tab_menu">
                        <li>选择</li>
                        <li>姓名</li>
                        <li>账号</li>
                        <li>简介</li>
                        <li>操作</li>
                    </ul>
                    <!--&lt;!&ndash;数据&ndash;&gt;-->
                    <ul class="baby_content_tab_ul1 " ms-repeat="parentList" ms-class = "baby_content_tab_bg:$index%2!=0">
                        <li class="baby_tab_checkbox_li"><input type="checkbox"  name="checkbox"
                                                                value="190 " onclick="checkBox(3,this);"></li>
                        <li>{{el.class_name}}</li>
                        <li>{{el.class_name}}</li>
                        <li>{{el.level}}</li>
                        <li><a class="edit" href="javascript: void(0)" eid="190">编辑</a></li>
                    </ul>
                </div>

                <!--学生管理数据-->
                <div class="user-main2" style="display: none" ms-class="block:curPage == 'student'" ms-if="curPage == 'student' ">
                    <div class="user-title2">
                        <a ms-click="router('class')" class="back">
                            <img src="img/back.png" title="">
                        </a>
                        <h3>{{？班级}}</h3>
                    </div>
                </div>
                <div class="baby_content_tab" ms-if="curPage =='student'" >

                    <ul class="baby_content_tab_menu">
                        <li>选择</li>
                        <li>班级</li>
                        <li>姓名</li>
                        <li>性别</li>
                        <li>出生日期</li>
                        <li>家长姓名</li>
                        <li>家长电话</li>
                        <li>操作</li>
                    </ul>
                    <!--&lt;!&ndash;数据&ndash;&gt;-->
                    <ul class="baby_content_tab_ul1 " ms-repeat="studentList" ms-class = "baby_content_tab_bg:$index%2!=0">
                        <li class="baby_tab_checkbox_li"><input type="checkbox" id="checkid_3" name="checkbox"
                                                                value="190 " onclick="checkBox(3,this);"></li>
                        <li>{{el.class_name}}</li>
                        <li>{{el.children_name}}</li>
                        <li>{{el.sex}}</li>
                        <li>{{el.birthday | date('yyyy-MM-dd') }}</li>
                        <li>{{el.name}}</li>
                        <li>{{el.username}}</li>
                        <li><a class="edit" href="javascript: void(0)" eid="190">编辑</a></li>
                    </ul>
                </div>

            </form>
            <div class="baby_content_dt">
                <div class="baby_content_dt-1">
                    <input type="checkbox" onclick="checkBoxAll(this);">
                    <span style="cursor: pointer;">全选</span>
                    <span class="baby_content_del" onclick="delAdmin();">批量删除</span>
                    <span class="baby_content_del edit">添加</span>
                </div>
                <!--系统用户弹窗-->
                <div class="shade"   ms-class="block:pop=='admin' ">
                    <div class="user-edit">
                        <div class="user-main">
                            <div class="user-title">
                                <h3>系统用户：</h3>
                            </div>

                            <table class="table_1" cellpadding="0" cellspacing="0">
                                <tr >
                                    <th width="40%">姓名：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">账号：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">角色：</th>
                                    <td width="60%">
                                        <select  ms-duplex="tegr_id">
                                            <option ms-attr-value="{{el.tegr_id}}" ms-repeat="tegerList">{{el.tegr_name}}</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">简介：</th>
                                    <td width="60%"><textarea rows="4" cols="30"></textarea>
                                    </td>
                                </tr>
                            </table>
                            <div class="user-btn">
                                <input type="button" value="保存" class="oper" ms-click="add"/>
                                <input type="button" value="返回" class="oper" ms-click="close"/>
                            </div>
                        </div>
                    </div>
                </div>
                <!--集团弹窗-->
                <div class="shade"   ms-class="block:pop=='deger' ">
                    <div class="user-edit">
                        <div class="user-main">
                            <div class="user-title">
                                <h3>系统用户：</h3>
                            </div>

                            <table class="table_1" cellpadding="0" cellspacing="0">
                                <tr >
                                    <th width="40%">集团名称：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                            </table>
                            <div class="user-btn">
                                <input type="button" value="保存" class="oper" ms-click="add"/>
                                <input type="button" value="返回" class="oper" ms-click="close"/>
                            </div>
                        </div>
                    </div>
                </div>

                <!--教师弹窗-->
                <div class="shade"   ms-class="block:pop=='teacher' ">
                    <div class="user-edit">
                        <div class="user-main">
                            <div class="user-title">
                                <h3>教师：</h3>
                            </div>

                            <table class="table_1" cellpadding="0" cellspacing="0">
                                <tr >
                                    <th width="40%">姓名：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">账号：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">角色：</th>
                                    <td width="60%">
                                        <select  ms-duplex="tegr_id">
                                            <option ms-attr-value="{{el.tegr_id}}" ms-repeat="tegerList">{{el.tegr_name}}</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">简介：</th>
                                    <td width="60%"><textarea rows="4" cols="30"></textarea>
                                    </td>
                                </tr>
                            </table>
                            <div class="user-btn">
                                <input type="button" value="保存" class="oper" ms-click="add"/>
                                <input type="button" value="返回" class="oper" ms-click="close"/>
                            </div>
                        </div>
                    </div>
                </div>、

                <!--学校弹窗-->
                <div class="shade"   ms-class="block:pop=='school' ">
                    <div class="user-edit">
                        <div class="user-main">
                            <div class="user-title">
                                <h3>学校：</h3>
                            </div>

                            <table class="table_1" cellpadding="0" cellspacing="0">
                                <tr >
                                    <th width="40%">学校名称：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">集团名称：</th>
                                    <td width="60%">
                                        <select  ms-duplex="degr_id">
                                            <option ms-attr-value="{{el.degr_id}}" ms-repeat="tegerList">{{el.degr_name}}</option>
                                        </select>
                                    </td>
                                </tr>
                            </table>
                            <div class="user-btn">
                                <input type="button" value="保存" class="oper" ms-click="add"/>
                                <input type="button" value="返回" class="oper" ms-click="close"/>
                            </div>
                        </div>
                    </div>
                </div>

                <!--班级弹窗-->
                <div class="shade"   ms-class="block:pop=='class' ">
                    <div class="user-edit">
                        <div class="user-main">
                            <div class="user-title">
                                <h3>系统用户：</h3>
                            </div>

                            <table class="table_1" cellpadding="0" cellspacing="0">
                                <tr >
                                    <th width="40%">班级名称：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                            </table>
                            <div class="user-btn">
                                <input type="button" value="保存" class="oper" ms-click="add"/>
                                <input type="button" value="返回" class="oper" ms-click="close"/>
                            </div>
                        </div>
                    </div>
                </div>

                <!--家长弹窗-->
                <div class="shade"   ms-class="block:pop=='parent' ">
                    <div class="user-edit">
                        <div class="user-main">
                            <div class="user-title">
                                <h3>系统用户：</h3>
                            </div>

                            <table class="table_1" cellpadding="0" cellspacing="0">
                                <tr >
                                    <th width="40%">姓名：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">账号：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">简介：</th>
                                    <td width="60%"><textarea rows="4" cols="30"></textarea>
                                    </td>
                                </tr>
                            </table>
                            <div class="user-btn">
                                <input type="button" value="保存" class="oper" ms-click="add"/>
                                <input type="button" value="返回" class="oper" ms-click="close"/>
                            </div>
                        </div>
                    </div>
                </div>

                <!--家长弹窗-->
                <div class="shade"   ms-class="block:pop=='student' ">
                    <div class="user-edit">
                        <div class="user-main">
                            <div class="user-title">
                                <h3>学生：</h3>
                            </div>

                            <table class="table_1" cellpadding="0" cellspacing="0">
                                <tr >
                                    <th width="40%">学生姓名：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr>
                                    <th width="40%">学生性别：</th>
                                    <td width="60%">
                                        <form>
                                            <input name="true" type="radio" checked="checked" value="0"/>男
                                            <input name="true" type="radio" value="1"/>女
                                        </form>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">出生日期：</th>
                                    <td width="60%"><textarea rows="4" cols="30"></textarea>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">家长姓名：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                                <tr >
                                    <th width="40%">家长电话：</th>
                                    <td width="60%"><input type="text" name="" ms-duplex="el.value"/>
                                    </td>
                                </tr>
                            </table>
                            <div class="user-btn">
                                <input type="button" value="保存" class="oper" ms-click="add"/>
                                <input type="button" value="返回" class="oper" ms-click="close"/>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>

</body>

<!--query脚本-->
<script type="text/javascript">
    function checkBoxAll(obj) {
        $("#adminId").val("");
        if (obj.checked == true) {
            $("[name='checkbox']").attr("checked", 'true');//全选
            var str = "";
            $("[name='checkbox'][checked]").each(function (i) {
                if (i == 0) {
                    str = $(this).val();
                } else {
                    str += "," + $(this).val();
                }
            });
            $("#adminId").val(str);

        } else {
            $("[name='checkbox']").removeAttr("checked");//取消全选
        }
    }
    function checkBox(index, obj) {
        $("#adminId").val("");
        if (obj.checked == true) {
            $("#checkid_" + index).attr("checked", true);
        } else {
            $("#checkid_" + index).attr("checked", false);
        }
        var str = "";
        $("[name='checkbox'][checked]").each(function (i) {
            if (i == 0) {
                str = $(this).val();
            } else {
                str += "," + $(this).val();
            }
        });
        $("#adminId").val(str);
    }

    function delAdmin() {
        var adminId = $("#adminId").val().trim();
        if (isNull(adminId)) {
            alertMsg("请先选择一条信息", 0);
            return;
        }
        if (confirm("确定要删除该消息吗？") != "0") {
            $.ajax({
                url: "admin/delAdmin.do",// 跳转到 action
                data: {
                    "ids": adminId
                },
                type: 'post',
                cache: false,
                success: function (data) {
                    if (data == 'loseSession') {
                        location.href = "http://banxiaobao.com:8015/gbb/admin/loginInit.do";
                        return;
                    }
                    var json = eval("(" + data + ")");// 解析json
                    var code = json.code;
                    if (code == 200) {
                        alertMsg("操作成功", 1);
                        window.location.reload();
                    } else {
                        alertMsg("操作失败", 2);
                    }
                },
                error: function () {
                    alertMsg("系统错误！", 2);
                }
            });
        }
    }
    function chickSubmit() {
        $("#formId").submit();
    }

    (function (config) {
        config['lock'] = true;
        config['fixed'] = true;
        config['opacity'] = .4;
        config['okVal'] = '确定';
        config['cancelVal'] = '取消';
        // [more..]
    })(art.dialog.defaults);


    $(function () {
        $("#searchName").val("");

        $(".edit").click(function () {
            var $this = $(this);
            var eid = $this.attr("eid");
            var title = '编辑';
            if (eid == undefined) {
                eid = "";
                title = '新增';
            }
            art.dialog.open("admin/editTeacher.do?id=" + eid, {
                width: 600,
                height: 470,
                title: title,
                // 在open()方法中，init会等待iframe加载完毕后执行
                init: function () {
                    //var iframe = this.iframe.contentWindow;
                    //var top = art.dialog.top;// 引用顶层页面window对象

                },
                ok: function () {
                    var iframe = this.iframe.contentWindow;
                    if (!iframe.document.body) {
                        alert('iframe还没加载完毕呢');
                        return false;
                    }
                    ;
                    var dialog = this;
                    iframe.submitAdmin(function (state) {
                        switch (state) {
                            case 0: // 成功
                                dialog.close();
                                window.location.reload();
                                break;
                            case 2: // 未登录
                                location.href = "http://banxiaobao.com:8015/gbb/admin/loginInit.do";
                                break;
                            default:
                                break;
                        }
                    });
                    return false;
                },
                cancel: true
            });
        });
    });
</script>
</html>